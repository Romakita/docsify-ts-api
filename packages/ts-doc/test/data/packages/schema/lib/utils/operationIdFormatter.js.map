{"version":3,"file":"operationIdFormatter.js","sourceRoot":"","sources":["../../src/utils/operationIdFormatter.ts"],"names":[],"mappings":";;AAAA,6CAAsC;AAEtC,SAAgB,oBAAoB,CAAC,OAAO,GAAG,OAAO;IACpD,MAAM,aAAa,GAAG,IAAI,GAAG,EAAkB,CAAC;IAEhD,OAAO,CAAC,IAAY,EAAE,WAAmB,EAAE,OAAe,EAAE,EAAE,EAAE;QAC9D,MAAM,WAAW,GAAG,uBAAS,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC,CAAC;QACtF,MAAM,YAAY,GAAG,IAAI,GAAG,WAAW,CAAC;QAExC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;YACpC,aAAa,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;YAEnC,OAAO,WAAW,CAAC;SACpB;QAED,iBAAiB;QACjB,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QACvC,IAAI,MAAM,EAAE;YACV,MAAM,YAAY,GAAG,IAAI,GAAG,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YAEpD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;gBACpC,aAAa,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;gBAEnC,OAAO,uBAAS,CAAC,GAAG,WAAW,OAAO,MAAM,EAAE,CAAC,CAAC;aACjD;SACF;QAED,MAAM,EAAE,GAAG,aAAa,CAAC,GAAG,CAAC,YAAY,CAAE,GAAG,CAAC,CAAC;QAChD,aAAa,CAAC,GAAG,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;QAEpC,OAAO,GAAG,WAAW,IAAI,EAAE,EAAE,CAAC;IAChC,CAAC,CAAC;AACJ,CAAC;AA9BD,oDA8BC","sourcesContent":["import {camelCase} from \"change-case\";\n\nexport function operationIdFormatter(pattern = \"%c.%m\") {\n  const OPERATION_IDS = new Map<string, number>();\n\n  return (name: string, propertyKey: string, path: string = \"\") => {\n    const operationId = camelCase(pattern.replace(/%c/, name).replace(/%m/, propertyKey));\n    const operationKey = name + propertyKey;\n\n    if (!OPERATION_IDS.has(operationKey)) {\n      OPERATION_IDS.set(operationKey, 0);\n\n      return operationId;\n    }\n\n    // try with paths\n    const result = path.match(/{(\\w+)}/gi);\n    if (result) {\n      const operationKey = name + propertyKey + result[0];\n\n      if (!OPERATION_IDS.has(operationKey)) {\n        OPERATION_IDS.set(operationKey, 0);\n\n        return camelCase(`${operationId} By ${result}`);\n      }\n    }\n\n    const id = OPERATION_IDS.get(operationKey)! + 1;\n    OPERATION_IDS.set(operationKey, id);\n\n    return `${operationId}_${id}`;\n  };\n}\n"]}