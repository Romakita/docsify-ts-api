{"version":3,"file":"getPropertiesStores.js","sourceRoot":"","sources":["../../src/utils/getPropertiesStores.ts"],"names":[],"mappings":";;AAEA,6DAAwD;AACxD,6DAAwD;AAExD;;;GAGG;AACH,SAAgB,mBAAmB,CACjC,MAAuB;IAEvB,MAAM,KAAK,GAAQ,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,uCAAkB,CAAC,MAAM,CAAC,CAAC;IAExE,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;QACtB,MAAM,MAAM,GAAG,uCAAkB,CAAC,KAAK,CAAC,CAAC;QACzC,KAAK,CAAC,WAAW,GAAG,IAAI,GAAG,EAAE,CAAC;QAE9B,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE;YAC5B,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;gBACxC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,WAAW,CAAC,EAAE;oBACjD,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;iBACzD;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;KACJ;IAED,OAAO,KAAK,CAAC,WAAW,CAAC;AAC3B,CAAC;AAnBD,kDAmBC","sourcesContent":["import {Type} from \"@tsed/core\";\nimport {JsonEntityStore} from \"../domain/JsonEntityStore\";\nimport {getInheritedStores} from \"./getInheritedStores\";\nimport {getJsonEntityStore} from \"./getJsonEntityStore\";\n\n/**\n * Return the list of properties including properties from inherited classes\n * @param target\n */\nexport function getPropertiesStores<T extends JsonEntityStore = JsonEntityStore>(\n  target: Type<any> | any\n): Map<string | symbol | number, T> {\n  const store: any = target.isStore ? target : getJsonEntityStore(target);\n\n  if (!store.$properties) {\n    const stores = getInheritedStores(store);\n    store.$properties = new Map();\n\n    stores.forEach(currentStore => {\n      currentStore.children.forEach(propStore => {\n        if (!store.$properties.has(propStore.propertyKey)) {\n          store.$properties.set(propStore.propertyKey, propStore);\n        }\n      });\n    });\n  }\n\n  return store.$properties;\n}\n"]}